# 智能考勤小程序 - 教师端功能设计

## 一、课程管理

### 1.1 功能需求
- 查看本人教授的所有课程
- 按学期筛选课程
- 搜索课程（按课程名或班级）
- 查看每门课程的基本信息和出勤概况
- 快速发起签到

### 1.2 课程信息
每门课程需要显示：
- 课程名称、授课班级
- 上课时间和地点
- 学生人数
- 本学期出勤率

### 1.3 快捷操作
- 查看课程详情和学生名单
- 跳转到考勤统计页面
- 快速发起签到

---

## 二、发起签到

### 2.1 签到配置
**必填参数**：
- 课程选择（自动填充）
- 签到策略（高安全/标准/便捷）
- 签到时长（建议5-15分钟）
- 签到范围（默认50米）

**可选参数**：
- 迟到缓冲时间（0/5/10/15分钟）
- 特殊说明

### 2.2 签到策略说明
**高安全模式**：
- 验证方式：定位+二维码+人脸
- 适用场景：重要课程、考试
- 签到时间：较长（1-2分钟/人）

**标准模式**：
- 验证方式：定位+二维码
- 适用场景：日常课程
- 签到时间：适中（30秒/人）

**便捷模式**：
- 验证方式：仅二维码
- 适用场景：小班课、室外课
- 签到时间：最快（10秒/人）

### 2.3 地点设置
**功能需求**：
- 自动获取当前位置作为签到中心点
- 支持手动调整中心点位置
- 设置有效签到范围（30-200米）
- 地图上显示范围圈

**使用场景**：
- 固定教室：保存教室位置，下次自动填充
- 临时地点：手动选择位置

### 2.4 发起流程
1. 选择课程（或从课程列表点击"发起签到"自动填充）
2. 选择签到策略
3. 设置签到时长和缓冲时间
4. 确认或调整签到地点
5. 点击"开始签到"
6. 生成动态二维码并进入监控页面

---

## 三、签到实时监控

### 3.1 核心功能
- 实时显示签到进度（已签到/总人数）
- 显示动态二维码（每30秒刷新）
- 显示签到倒计时
- 查看已签到学生列表
- 查看未签到学生列表
- 识别异常签到情况

### 3.2 学生列表管理
**已签到列表**：
- 显示学生姓名、签到时间
- 标注状态（正常/迟到）
- 按签到时间排序
- 点击查看签到详情（位置、验证方式等）

**未签到列表**：
- 显示尚未签到的学生
- 支持单个或批量推送提醒
- 提供快速统计功能

### 3.3 异常签到预警
**需要预警的情况**：
- 定位失败多次
- 人脸识别失败多次
- 距离过远但扫码成功
- 短时间内多次尝试签到

**处理方式**：
- 标记异常学生
- 显示异常原因
- 教师可标记"允许手动签到"

### 3.4 手动签到
**使用场景**：
- 学生设备故障
- 定位异常但确实在场
- 其他特殊情况

**操作流程**：
- 在未签到列表中选择学生
- 填写手动签到原因
- 确认手动签到
- 记录中标注为"教师手动签到"

### 3.5 结束签到
**操作**：
- 可提前手动结束签到
- 倒计时结束自动结束
- 未签到学生自动标记为缺勤

**后续动作**：
- 生成签到报告
- 保存签到记录
- 推送缺勤通知给学生

---

## 四、考勤统计

### 4.1 统计维度
**时间维度**：
- 本周、本月、本学期
- 自定义日期范围

**课程维度**：
- 单门课程统计
- 所有课程汇总

### 4.2 统计指标
**整体指标**：
- 总签到次数
- 正常/迟到/缺勤次数
- 出勤率百分比
- 与上一周期对比

**趋势分析**：
- 按时间的出勤率变化曲线
- 识别出勤率波动

**学生排名**：
- 按缺勤次数排序
- 按出勤率排序
- 按迟到次数排序

### 4.3 异常学生识别
**预警规则**：
- 连续3次及以上缺勤
- 缺勤率超过30%
- 近期缺勤频率明显上升

**显示信息**：
- 预警学生列表
- 预警原因
- 具体缺勤情况

### 4.4 数据导出
**导出格式**：
- Excel表格（完整考勤数据）
- PDF报告（包含图表和分析）

**导出内容**：
- 学生名单和签到记录
- 统计图表
- 出勤率分析
- 异常情况说明

---

## 五、补签审批

### 5.1 审批列表
**待审批申请**：
- 显示学生提交的补签申请
- 按提交时间排序
- 显示申请基本信息（学生、课程、类型）

**已处理申请**：
- 显示历史审批记录
- 支持按状态筛选（已通过/已驳回）
- 支持搜索学生

### 5.2 审批详情
**申请信息**：
- 学生姓名、学号
- 缺勤课程和时间
- 请假类型
- 详细说明
- 证明材料（图片）

**审批操作**：
- 查看证明材料（点击放大）
- 通过申请
- 驳回申请（需填写驳回理由）

### 5.3 审批规则
**通过条件**：
- 理由充分合理
- 证明材料真实有效
- 符合补签申请期限

**驳回情况**：
- 证明材料不清晰或不符
- 理由不充分
- 超过补签申请期限
- 存在虚假信息

### 5.4 批量审批
**功能需求**：
- 支持多选申请
- 批量通过（适用于统一的公假等）
- 批量驳回（需统一填写理由）

### 5.5 审批后处理
**通过后**：
- 自动更新考勤记录
- 发送通知给学生
- 记录审批人和时间

**驳回后**：
- 发送驳回通知和理由给学生
- 学生可修改后重新提交

---

## 六、学生管理

### 6.1 学生名单
**功能需求**：
- 查看课程的完整学生名单
- 搜索学生（按姓名或学号）
- 查看学生考勤概况

### 6.2 学生详情
**基本信息**：
- 姓名、学号、班级
- 联系方式

**考勤信息**：
- 本课程出勤统计
- 详细签到记录
- 补签申请记录

**操作功能**：
- 查看学生完整考勤记录
- 导出学生个人考勤报告
- 联系学生

---

## 七、课程设置

### 7.1 默认签到策略
**功能说明**：
- 为每门课程设置默认的签到策略
- 下次发起签到时自动使用
- 可在发起时临时修改

### 7.2 常用地点管理
**功能需求**：
- 保存常用教室位置
- 为课程绑定固定教室
- 发起签到时自动填充

### 7.3 考勤规则配置
**可配置项**：
- 迟到判定时间
- 缺勤判定规则
- 补签申请期限

---

## 八、消息通知

### 8.1 接收通知
**通知类型**：
- 新的补签申请
- 学生签到异常
- 系统公告

### 8.2 发送通知
**功能需求**：
- 向未签到学生发送提醒
- 向缺勤学生发送通知
- 自定义通知内容

---

## 九、数据分析辅助

### 9.1 课堂出勤分析
**分析维度**：
- 不同时间段的出勤率（早上/下午/晚上）
- 不同星期的出勤率（周一到周五）
- 节假日前后的出勤变化

### 9.2 学生分组
**功能建议**：
- 按出勤情况分组（优秀/良好/关注/预警）
- 重点关注预警学生
- 为不同组别采取不同管理措施


## 十、权限与安全

### 10.1 数据权限
- 教师只能查看和管理自己的课程
- 只能审批自己课程的补签申请
- 不能修改其他教师的数据

### 10.2 操作日志
**记录内容**：
- 发起签到时间和参数
- 手动签到操作
- 审批操作记录
- 数据导出记录

### 10.3 隐私保护
- 学生联系方式脱敏显示
- 签到照片仅用于验证
- 导出数据需要权限确认