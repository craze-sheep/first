<view class="page">
  <view class="empty" wx:if="{{loading}}">加载中...</view>
  <view class="empty" wx:elif="{{!approvals.length}}">暂无补签申请</view>
  <block wx:else>
    <view class="card" wx:for="{{approvals}}" wx:key="id">
      <view class="header">
        <view class="student">{{item.student}}</view>
        <view class="status {{item.status}}">
          {{item.status === 'pending' ? '待审批' : item.status === 'approved' ? '已通过' : '已驳回'}}
        </view>
      </view>
      <view class="course">{{item.course}}</view>
      <view class="reason">{{item.reason}}</view>
      <view class="time">提交时间：{{item.submittedAt}}</view>
      <view class="actions" wx:if="{{item.status === 'pending'}}">
        <button size="mini" type="primary" data-id="{{item.id}}" bindtap="handleApprove">通过</button>
        <button size="mini" type="warn" data-id="{{item.id}}" bindtap="handleReject">驳回</button>
      </view>
    </view>
  </block>
</view>
